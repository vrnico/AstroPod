@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using System.Security.Claims
@model IEnumerable<AstroPod.Models.AppUser>


<h1>@ViewBag.User.UserName's AstroDB</h1>



<div class="content">
    @if (User.IsInRole("Admin"))
    {
        <ul>
            @foreach (var astro in Model)
            {


                <li>Username: @Html.DisplayFor(modelItem => astro.UserName)</li>



            }
        </ul>
    }
    <table class="table">
        <tr>
            <th>Title</th>
            <th>Image</th>
            <th>Description</th>
            @if (User.IsInRole("Admin"))
            {
                <th>Admin Actions</th>}
        </tr>
        <tbody class="tbody"></tbody>



        <script>

    //ajax call
    $.ajax({
        type: 'GET',
        url: '@Url.Action("HelloAjax")', success: function (result) {
            result.forEach(function (content) {
                console.log("RESULT: " + result)
                $(".tbody").append(
                    "<tr>" +
                    "<td>" + content.title + "</td>" +
                    "<td><img src='" + content.image + "'></td>" +
                    "<td>" + content.description + "</td>" +
                    "<td>" +
                    "<a href='Content/Add/" + content.contentId + "'>Edit Content</a> | " +
                    "<a href='Content/Delete/" + content.contentId + "'>Delete</a>" +
                    "</td>" +
                    "</tr>"
                )
            })
        }
    });
        </script>

    </table>
</div>
<a-scene embedded>
    <a-box position="1 0.5 -3" rotation="0 45 0" color="@User.Identity.Name"></a-box>
    <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
    <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
    <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
    <a-sky color="#ECECEC"></a-sky>
</a-scene>
